# 🛫 AMWS (Air Mission Weather System) 프로젝트 구현 보고서

## 1. 프로젝트 개요

* **프로젝트명:** AMWS (Air Mission Weather System)
* **목표:** 기상청 공공데이터와 항공기 제원(OSINT)을 결합하여, 각 비행단의 기상 상황에 따른 **항공기 기종별 작전 가능/불가(Go/No-Go)** 여부를 실시간으로 판단하는 지휘관용 대시보드 구축.
* **핵심 가치:** 단순한 날씨 정보 제공을 넘어, **'항공 작전'이라는 도메인 지식(Business Logic)**을 결합하여 의사결정을 지원하는 정보 체계 구현.
* **기술 스택:** Python, Flask, PostgreSQL, Public Data API (기상청)

---

## 2. 데이터베이스 설계 및 구축 (PostgreSQL)

정보장교의 관점에서 데이터의 무결성과 관계성을 고려하여 관계형 데이터베이스(RDBMS)를 설계했습니다. `amws`라는 전용 스키마를 사용하여 관리를 효율화했습니다.

### A. 테이블 설계 (Schema Design)

1. **`amws.airbases` (비행단 정보 - 정적 데이터)**
* **역할:** 전국의 주요 군 비행장(광주, 수원, 서산, 대구 등)의 위치 정보 저장.
* **핵심 컬럼:** `base_id` (K-site 코드), `lat`/`lon` (좌표), `runway_heading` (활주로 자방위 - 측풍 계산용).
* **데이터:** K-2(대구), K-57(광주), K-13(수원/10비) 등 실제 부대 데이터 매핑.


2. **`amws.aircraft_assets` (항공 자산 제원 - 정적 데이터)**
* **역할:** 기종별 작전 한계치(Limit) 저장. (OSINT 기반)
* **핵심 컬럼:** `max_crosswind_kts` (측풍 제한), `min_visibility_m` (시정 제한), `precip_restricted` (강수 제한 여부).
* **데이터:** F-15K, KF-16, F-35A, FA-50, C-130H/J, KC-330 등.


3. **`amws.weather_observations` (기상 관측 - 동적 시계열 데이터)**
* **역할:** API로부터 수집된 실시간 기상 데이터 적재.
* **핵심 컬럼:** `wind_spd_kts`, `visibility_m`, `ceiling_ft`, `weather_desc` (항공 기상 용어).


4. **`amws.weather_terms` (용어 사전 - 참조 데이터)**
* **역할:** 기상청의 숫자 코드나 한글 데이터를 항공 기상 약어(METAR)로 변환하기 위한 매핑 테이블.
* **데이터:** SKC(맑음), RA(비), FG(안개), TS(뇌우) 등.



---

## 3. 데이터 파이프라인 (ETL) 구축

Python을 활용하여 공공데이터 포털의 API 데이터를 수집, 가공하여 DB에 적재하는 자동화 로직을 구현했습니다.

### A. 데이터 수집 (Extract)

* **소스:** 기상청 단기예보 조회 서비스 (Open API).
* **방식:** `requests` 라이브러리를 이용해 JSON 데이터 호출.
* **격자 변환:** 기상청 특유의 격자 좌표계(X, Y)를 위경도(Lat/Lon)로 변환하는 `map_to_grid` 함수 구현.

### B. 데이터 변환 (Transform)

* **단위 변환:** 기상청의 풍속 `m/s` 단위를 항공 작전 표준인 `knots`로 변환 ().
* **용어 표준화:** 기상청의 강수형태(PTY) 코드를 항공 기상 용어(METAR Code)로 변환.
* 예: `PTY 1` (비)  `RA`, `PTY 3` (눈)  `SN`, `PTY 0` (없음)  `SKC`.


* **결측치 추정:** 일반 예보 API에 없는 시정/운고 데이터를 강수 형태에 기반하여 추정하는 로직 적용.

### C. 데이터 적재 (Load)

* `psycopg2` 라이브러리를 사용하여 PostgreSQL DB에 연결 및 데이터 Insert.
* 트랜잭션 관리(`commit`/`rollback`)를 통해 데이터 무결성 보장.

---

## 4. 비즈니스 로직 구현 (SQL Analysis)

단순 조회가 아닌, **작전 가능 여부를 판단하는 핵심 알고리즘**을 SQL 쿼리로 구현했습니다.

### A. 판단 로직 (Decision Making)

기상 데이터(`weather_observations`)와 자산 한계치(`aircraft_assets`)를 조인(Join)하여 `CASE WHEN` 구문으로 상태를 판정했습니다.

1. **측풍(Crosswind) 초과:** `현재 풍속 > 기종별 제한 풍속`  **NO-GO (Wind)**
2. **저시정(Low Visibility):** `현재 시정 < 기종별 최소 시정`  **NO-GO (Vis)**
3. **위험 기상(Hazardous Weather):** 뇌우(TS), 우박(GR) 등 코드 감지 시  **NO-GO (Hazard)**
4. **정상:** 위 조건 통과 시  **GO**

### B. 시나리오 검증

다양한 기상 상황을 가정하여 로직을 테스트했습니다.

* **시나리오 1 (강풍):** 서산 기지 풍속 28.5kts 상황  F-15K(30kts 제한)는 **Go**, KF-16(25kts 제한)은 **No-Go** 판정 확인.
* **시나리오 2 (해무):** 강릉 기지 시정 1200m 상황  F-35A(800m 제한)는 **Go**, KF-5(3200m 제한)는 **No-Go** 판정 확인.
* **시나리오 3 (뇌우):** 중원 기지 뇌우(TS) 발생  모든 기종 **No-Go** 판정 및 위험 기상 경고 확인.

---

## 5. 향후 발전 계획 (Next Step)

* **웹 대시보드 시각화:** Flask와 HTML/CSS를 연동하여 지도(Map) 기반의 관제 화면 구현 (비행단별 신호등 표시 🟢/🔴).
* **스케줄러 고도화:** `APScheduler`를 도입하여 매시 정각 10분마다 자동으로 기상 데이터를 수집하는 배치 작업 등록.
* **측풍 정밀 계산:** 활주로 방향(`runway_heading`)과 풍향(`wind_dir`)의 차이를 삼각함수()로 계산하여, 실제 측풍 성분만을 추출해 판정 로직 정교화.

---

**[정리]**
이 프로젝트는 단순한 데이터 수집을 넘어, **수집된 데이터를 군사적/항공적 기준(Domain Knowledge)에 맞춰 해석하고 가공하여 가치 있는 정보(Intelligence)로 재생산**하는 과정을 보여줍니다. 이는 데이터 엔지니어링 역량과 도메인 응용 능력을 동시에 입증하는 좋은 사례입니다.
